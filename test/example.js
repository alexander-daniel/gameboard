'use strict';

var GameBoard = require('../index');
//var canvas = document.getElementById('gameCanvas');
var canvas = document.createElement('canvas');
canvas.id  = 'gameCanvas';
document.body.appendChild(canvas);
var resemble = require('node-resemble.js');
var test = require('tape');

var baseline = new Image();
var woman = new Image();
var man = new Image();
var grass = new Image();
var tree = new Image();
var screenShot = new Image();

/* jshint ignore:start */
baseline.src = 'data:image/png;base64,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';
woman.src = 'data:image/png;base64,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';
man.src = 'data:image/png;base64,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';
grass.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAAAZQTFRFSrVD////WpzGYAAAAAFiS0dEAf8CLd4AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAMSURBVAjXY2AgDQAAADAAAceqhY4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTQtMDktMDFUMTI6MDE6MTgrMDI6MDARLnnyAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE0LTA5LTAxVDEyOjUyOjA3KzAyOjAwwPGmeAAAAABJRU5ErkJggg==';
tree.src = 'data:image/png;base64,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';
/* jshint ignore:end */

var assets = {
    woman: woman,
    man: man,
    grass: grass,
    tree: tree
};

var gameBoard = new GameBoard({
    canvas: canvas,
    tiles: {},
    tileSize: 16,
    width: 10,
    height: 10,
    FPS: 20,
    grid: true, // really slows down performance
    assets: assets
});

var tiles = require('./tiles')(10,10); // create 10x10 blank map
var eve = require('./units').Woman;
var adam = require('./units').Man;
var treeOfLife = require('./units').Tree;

gameBoard.start();
gameBoard.tileUpdate(tiles);
gameBoard.addUnit(treeOfLife);
gameBoard.addUnit(eve);
gameBoard.addUnit(adam);

test('comparing canvas image to baseline image for exact match', function (t) {

    t.plan(1);

    setTimeout(function () {
        save();
    }, 2000);

    function save(){
        // get the data
        screenShot.src = canvas.toDataURL('image/png');
        var imgData = screenShot.src.replace(/^data:image\/\w+;base64,/, '');
        var baseData = baseline.src.replace(/^data:image\/\w+;base64,/, '');
        var buf1 = new Buffer(imgData, 'base64');
        var buf2 = new Buffer(baseData, 'base64');
        resemble(buf1).compareTo(buf2).ignoreColors().onComplete(function(data){
            console.log(data);
            var mismatch = parseFloat(data.misMatchPercentage);
            t.ok(!mismatch, 'no mismatch');
            t.end();
        });
    }
});
